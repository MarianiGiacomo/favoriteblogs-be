(self.webpackChunkbloglist_frontend=self.webpackChunkbloglist_frontend||[]).push([[83],{9083:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(2137),o=n(3391),c=n(7757),u=n.n(c),a=n(7294),l=n(5697),i=n(4494),s=n(5977),m=n(332),f=n(2991),p=n(8430),d=n(8237),g=n(9574),b=n(8004),v=n(9453),h=function(e){var t=e.comment,n=e.handleSubmit,r=e.hide;return a.createElement("div",null,a.createElement(v.Z,{onSubmit:function(e){n(e),r&&r()}},a.createElement(v.Z.Input,{required:!0,label:"Leave a comment",id:"comment",name:t.name,type:t.type,value:t.value,onChange:t.onChange}),a.createElement(v.Z.Button,{type:"submit"},"Save")))};h.propTypes={comment:l.PropTypes.object.isRequired,handleSubmit:l.PropTypes.func.isRequired,hide:l.PropTypes.func};var y=h,E=n(2086),k=n(1479),C=function(e){var t=(0,a.useState)(!1),n=(0,o.Z)(t,2),c=n[0],l=n[1],i=(0,a.useState)({}),m=(0,o.Z)(i,2),f=m[0],p=m[1],v=(0,E.U)("text","comment"),h=e.blogs,C=e.comments,w=e.login,Z=e.removeBlog,O=e.match,P=e.setNotification,j=e.getBlogComments,S=e.likeBlog,T=e.addComment;(0,a.useEffect)((function(){(0,k.CV)(f)||c||function(){B.apply(this,arguments)}()}),[f]),(0,a.useEffect)((function(){if(h.length){var e=h.find((function(e){return e.id===O.params.id}));p(e)}}),[h]);var x=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={comment:v.value,timeStamp:(new Date).toDateString(),blog:f.id},e.prev=2,e.next=5,T(w.token,n);case 5:P({message:'A new comment "'.concat(n.comment,'" added')}),v.setValue(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),P({error:"Could not add the comment: ".concat(e.t0.message)});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return c||void 0===f?a.createElement(s.l_,{to:"/blogs"}):(0,k.CV)(f)?a.createElement("main",null,a.createElement("div",{className:"loader"}),a.createElement("p",null,"Fetching blog...")):a.createElement("main",null,a.createElement("h1",null,f.title),a.createElement("h2",null,"By ",f.author),a.createElement("p",null,a.createElement("a",{href:f.url,target:"_blank",rel:"noopener noreferrer"},f.url)),a.createElement("p",null,"Likes: ",f.likes),a.createElement(d.Z,{onClick:function(){return function(){return R.apply(this,arguments)}()}},"Like"),a.createElement("p",null,"Added by ",f.user.name),w.username===f.user.username?a.createElement(d.Z,{onClick:function(){return function(){if(window.confirm("Do you want to remove the blog ".concat(f.title," by ").concat(f.author,"?")))try{Z(w.token,f),l(!0),P({message:"Blog ".concat(f.title," by ").concat(f.author," removed")})}catch(e){P({error:"Could not remove the blog: ".concat(e.message)})}}()}},"Remove"):null,a.createElement(b.Z,{buttonLabel:"Add comment"},a.createElement(y,{comment:v,handleSubmit:x})),a.createElement("h3",null,"Comments"),a.createElement(g.Z,{divided:!0,relaxed:!0},C.length?C.map((function(e,t){return a.createElement(g.Z.Item,{key:t},a.createElement("p",null,e.comment),a.createElement("p",null,"by ",e.user.name," - ",e.timeStamp))})):a.createElement(g.Z.Item,null,a.createElement("p",null,"No comments yet"))));function B(){return(B=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(f);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),P({error:"Could not fetch comments: ".concat(e.t0.message)});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function R(){return(R=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(f);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),P({error:"Could not add like: ".concat(e.t0.message)});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}},w={likeBlog:p.Mx,removeBlog:p.T7,setNotification:m.s,getBlogComments:f.CF,addComment:f.Ir};C.propTypes={login:l.PropTypes.object.isRequired,comments:l.PropTypes.array.isRequired,likeBlog:l.PropTypes.func.isRequired,removeBlog:l.PropTypes.func.isRequired,setNotification:l.PropTypes.func.isRequired,getBlogComments:l.PropTypes.func.isRequired};var Z=(0,i.$j)((function(e){return{blogs:e.blogs,comments:e.comments,login:e.login}}),w)(C)},8004:function(e,t,n){"use strict";var r=n(3391),o=n(7294),c=n(5697),u=n(8237);function a(e){var t=e.buttonLabel,n=e.children,c=(0,o.useState)(!1),a=(0,r.Z)(c,2),l=a[0],i=a[1],s=function(){return i(!1)},m=o.Children.map(n,(function(e){return o.cloneElement(e,{hide:s})}));return o.createElement("div",null,l?o.createElement(o.Fragment,null,m,o.createElement(u.Z,{onClick:function(){return i(!l)}},"Cancel")):o.createElement(u.Z,{onClick:function(){return i(!l)}},t))}a.propTypes={buttonLabel:c.PropTypes.string.isRequired},t.Z=a},2086:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(3391),o=n(7294),c=function(e,t){var n=(0,o.useState)(""),c=(0,r.Z)(n,2),u=c[0],a=c[1];return{name:t,type:e,value:u,onChange:function(e){a(e.target.value)},setValue:a}}},1479:function(e,t,n){"use strict";n.d(t,{Cz:function(){return u},gU:function(){return a},ww:function(){return l},R$:function(){return i},CV:function(){return s}});var r=n(6156);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e,t){return e.filter((function(e){return e.user.username===t.username}))},a=function(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e[t.name]=t.value})),e},l=function(e){return!!("http://"===e.substring(0,7)|"https://"===e.substring(0,8))},i=function(e,t){return e.map((function(e){var n=t.filter((function(t){return t.user.id===e.id}));return c(c({},e),{},{blogs:n})}))},s=function(e){return 0===Object.keys(e).length}}}]);