(self.webpackChunkfavoriteblogs_fe=self.webpackChunkfavoriteblogs_fe||[]).push([[83],{9083:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(2137),o=n(3391),a=n(7757),c=n.n(a),l=n(7294),u=n(5697),i=n(4494),m=n(5977),s=n(332),p=n(2991),f=n(8430),d=n(8237),g=n(9574),v=n(8004),h=n(9453),b=function(e){var t=e.comment,n=e.handleSubmit,r=e.hide;return l.createElement("div",null,l.createElement(h.Z,{onSubmit:function(e){n(e),r&&r()}},l.createElement(h.Z.Input,{required:!0,label:"Leave a comment",id:"comment",name:t.name,type:t.type,value:t.value,onChange:t.onChange}),l.createElement(h.Z.Button,{type:"submit"},"Save")))};b.propTypes={comment:u.PropTypes.object.isRequired,handleSubmit:u.PropTypes.func.isRequired,hide:u.PropTypes.func};var E=b,y=n(2086),k=n(1479),C=function(e){var t=(0,l.useState)(!1),n=(0,o.Z)(t,2),a=n[0],u=n[1],i=(0,l.useState)({}),s=(0,o.Z)(i,2),p=s[0],f=s[1],h=(0,y.U)("text","comment"),b=e.blogs,C=e.comments,Z=e.login,T=e.removeBlog,w=e.match,x=e.setNotification,B=e.getBlogComments,S=e.likeBlog,q=e.addComment;(0,l.useEffect)((function(){(0,k.CV)(p)||a||function(){R.apply(this,arguments)}()}),[p]),(0,l.useEffect)((function(){if(b.length){var e=b.find((function(e){return e.id===w.params.id}));f(e)}}),[b]);var P=function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={comment:h.value,timeStamp:(new Date).toDateString(),blog:p.id},e.prev=2,e.next=5,q(Z.token,n);case 5:x({message:'A new comment "'.concat(n.comment,'" added')}),h.setValue(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),x({error:"Could not add the comment: ".concat(e.t0.message)});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return a||void 0===p?l.createElement(m.l_,{to:"/blogs"}):(0,k.CV)(p)?l.createElement("main",null,l.createElement("div",{className:"loader"}),l.createElement("p",null,"Fetching blog...")):l.createElement("main",null,l.createElement("h1",null,p.title),l.createElement("h2",null,"By ",p.author),l.createElement("p",null,l.createElement("a",{href:p.url,target:"_blank",rel:"noopener noreferrer"},p.url)),l.createElement("p",null,"Likes: ",p.likes),l.createElement(d.Z,{onClick:function(){return function(){return L.apply(this,arguments)}()}},"Like"),l.createElement("p",null,"Added by ",p.user.name),Z.username===p.user.username?l.createElement(d.Z,{onClick:function(){return function(){if(window.confirm("Do you want to remove the blog ".concat(p.title," by ").concat(p.author,"?")))try{T(Z.token,p),u(!0),x({message:"Blog ".concat(p.title," by ").concat(p.author," removed")})}catch(e){x({error:"Could not remove the blog: ".concat(e.message)})}}()}},"Remove"):null,l.createElement(v.Z,{buttonLabel:"Add comment"},l.createElement(E,{comment:h,handleSubmit:P})),l.createElement("h3",null,"Comments"),l.createElement(g.Z,{divided:!0,relaxed:!0},C.length?C.map((function(e,t){return l.createElement(g.Z.Item,{key:t},l.createElement("p",null,e.comment),l.createElement("p",null,"by ",e.user.name," - ",e.timeStamp))})):l.createElement(g.Z.Item,null,l.createElement("p",null,"No comments yet"))));function R(){return(R=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(p);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),x({error:"Could not fetch comments: ".concat(e.t0.message)});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function L(){return(L=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(p);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),x({error:"Could not add like: ".concat(e.t0.message)});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}},Z={likeBlog:f.Mx,removeBlog:f.T7,setNotification:s.s,getBlogComments:p.CF,addComment:p.Ir};C.propTypes={login:u.PropTypes.object.isRequired,comments:u.PropTypes.array.isRequired,likeBlog:u.PropTypes.func.isRequired,removeBlog:u.PropTypes.func.isRequired,setNotification:u.PropTypes.func.isRequired,getBlogComments:u.PropTypes.func.isRequired};var T=(0,i.$j)((function(e){return{blogs:e.blogs,comments:e.comments,login:e.login}}),Z)(C)},8004:function(e,t,n){"use strict";var r=n(3391),o=n(7294),a=n(5697),c=n(8237),l=function(e){var t=e.buttonLabel,n=e.children,a=(0,o.useState)(!1),l=(0,r.Z)(a,2),u=l[0],i=l[1],m=function(){return i(!1)},s=o.Children.map(n,(function(e){return o.cloneElement(e,{hide:m})}));return o.createElement("div",null,u?o.createElement(o.Fragment,null,s,o.createElement(c.Z,{onClick:function(){return i(!u)}},"Cancel")):o.createElement(c.Z,{onClick:function(){return i(!u)}},t))};l.propTypes={buttonLabel:a.PropTypes.string.isRequired},t.Z=l},2086:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(3391),o=n(7294),a=function(e,t){var n=(0,o.useState)(""),a=(0,r.Z)(n,2),c=a[0],l=a[1];return{name:t,type:e,value:c,onChange:function(e){l(e.target.value)},setValue:l}}}}]);